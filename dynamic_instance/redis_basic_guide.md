
# Redisë€? ğŸ¤”

RedisëŠ” **Remote Dictionary Server**ì˜ ì¤„ì„ë§ë¡œ, ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ **í‚¤-ê°’ ì €ì¥ì†Œ(key-value store)** ì…ë‹ˆë‹¤.
ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©ë˜ê¸°ë„ í•˜ê³ , **ìºì‹œ**, **ë©”ì‹œì§€ ë¸Œë¡œì»¤**, **ì„¸ì…˜ ì €ì¥ì†Œ** ë“± ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™œìš©ë©ë‹ˆë‹¤.

---

## í•µì‹¬ íŠ¹ì§• âœ¨

- **In-Memory ì €ì¥ì†Œ**: ëª¨ë“  ë°ì´í„°ë¥¼ RAMì— ì €ì¥í•˜ì—¬ ë§¤ìš° ë¹ ë¥¸ ì½ê¸°/ì“°ê¸° ì†ë„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **Key-Value êµ¬ì¡°**: ë°ì´í„°ë¥¼ `key`ì™€ `value` ìŒìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
- **ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ì… ì§€ì›**:
  - `String`
  - `List`
  - `Set`
  - `Hash`
  - `Sorted Set`
  - `Stream` ë“±
- **ì§€ì†ì„±(Persistence) ì§€ì›**:
  - `RDB`(ìŠ¤ëƒ…ìƒ· ë°©ì‹)ì™€ `AOF`(ëª…ë ¹ì–´ ë¡œê·¸ ë°©ì‹)ë¡œ ë””ìŠ¤í¬ì—ë„ ì €ì¥ ê°€ëŠ¥
- **Pub/Sub**: ê²Œì‹œ/êµ¬ë… ê¸°ë°˜ ë©”ì‹œì§€ ì „ì†¡ ì‹œìŠ¤í…œìœ¼ë¡œë„ ì‚¬ìš© ê°€ëŠ¥
- **ë‹¨ì¼ ìŠ¤ë ˆë“œ ê¸°ë°˜**: í•˜ì§€ë§Œ ì›Œë‚™ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ë³‘ë ¬ì„±ì´ í¬ê²Œ ë¬¸ì œë˜ì§€ ì•ŠìŒ

---

## RedisëŠ” ì–¸ì œ ì“°ì¼ê¹Œ? ğŸ”§

| ìš©ë„            | ì„¤ëª… |
|-----------------|------|
| ìºì‹œ            | ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì œê³µ |
| ì„¸ì…˜ ì €ì¥ì†Œ     | ë¡œê·¸ì¸ ì •ë³´ ë“±ì„ ì„ì‹œë¡œ ì €ì¥ |
| ìˆœìœ„í‘œ/ë­í‚¹ ì‹œìŠ¤í…œ | ì ìˆ˜ ê¸°ë°˜ ì •ë ¬ì„ ìœ„í•œ Sorted Set í™œìš© |
| ì‹¤ì‹œê°„ ì±„íŒ…/ì•Œë¦¼ | Pub/Sub ê¸°ëŠ¥ í™œìš© |
| í ì‹œìŠ¤í…œ       | List ìë£Œí˜•ì„ ì‚¬ìš©í•œ ì‘ì—… ëŒ€ê¸°ì—´ êµ¬í˜„ |
| ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ê´€ë¦¬ | ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ ìºì‹œë‚˜ ì‘ì—… ëŒ€ê¸°ì—´ êµ¬í˜„ ë“± |

---

## ì˜ˆì‹œ ëª…ë ¹ì–´ ğŸ’¡

```bash
# Redis í´ë¼ì´ì–¸íŠ¸ ì ‘ì†
redis-cli

# ë°ì´í„° ì €ì¥ ë° ì¡°íšŒ
SET name "Suyeon"
GET name

# ë¦¬ìŠ¤íŠ¸ ì‚¬ìš© ì˜ˆì‹œ
LPUSH tasks "task1"
LPUSH tasks "task2"
LRANGE tasks 0 -1

# ì‚­ì œ
DEL name

# ì„œë²„ ìƒíƒœ í™•ì¸
PING
```

---

## Redisë¥¼ FastAPI + Celeryì™€ í•¨ê»˜ ì“´ë‹¤ë©´? ğŸ§µ

- **Celeryì˜ ë¸Œë¡œì»¤ë¡œ ì‚¬ìš©**: ë¹„ë™ê¸° ì‘ì—… íë¡œ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ê¸° ìœ„í•´ Redisë¥¼ ì¤‘ê°„ ë¸Œë¡œì»¤ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **ì‘ì—… ìƒíƒœ í™•ì¸**: Redisê°€ ê° ì‘ì—…ì˜ ìƒíƒœì™€ ê²°ê³¼ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

```python
# celery.py ì˜ˆì‹œ
celery = Celery(
    "worker",
    broker="redis://localhost:6379/0",
    backend="redis://localhost:6379/0"
)
```

---

## ë§ˆë¬´ë¦¬ ğŸŒ±

RedisëŠ” ì†ë„ê°€ ë§¤ìš° ë¹ ë¥´ê³  ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ **ì´ˆê²½ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤**ì…ë‹ˆë‹¤.  
ë‹¨ìˆœí•œ ìºì‹œë¶€í„° ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ì—­í• ê¹Œì§€ ë‹¤ì–‘í•˜ê²Œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì²˜ìŒì—ëŠ” ì–´ë µê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì§€ë§Œ, ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ë³´ë©° í•˜ë‚˜ì”© ìµí˜€ë‚˜ê°€ë©´ ê¸ˆë°© ì¹œìˆ™í•´ì§ˆ ê±°ì˜ˆìš”! ğŸ’ª

> Redis ê³µì‹ë¬¸ì„œ: https://redis.io/

> ìœ„ redis_basic_guideëŠ” chatGPTë¥¼ í†µí•´ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.

<hr>

### âœ… 1. RedisëŠ” "ì´ˆê³ ì† ë…¸íŠ¸"ë‹¤ â€” ì•„ì£¼ ë¹ ë¥¸ key-value ì €ì¥ì†Œ
> ë¹„ìœ  : ë”¥ëŸ¬ë‹ ë¼ë²¨ë§ íŒ€ì—ì„œ ```ëˆ„ê°€ ì–´ë–¤ ëª¨ë¸ì„ ì“°ëŠ” ì¤‘```ì¸ì§€, ```ì–´ë–¤ ì‘ì—…ì´ ëŒ€ê¸° ì¤‘```ì¸ì§€, ```í•™ìŠµì´ ëë‚¬ëŠ”ì§€``` ì¢…ì´ì— ì ì–´ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ ê°™ì´ ë³´ëŠ” ìƒí™©.

ì´ë•Œ ì¢…ì´ ëŒ€ì‹  Redisë¥¼ ì‚¬ìš©
```redis
SET model1_status "running"
GET model1_status
=> "running"
```
> RedisëŠ” ë””ìŠ¤í¬ ëŒ€ì‹  ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ë¯€ë¡œ ë§¤ìš° ë¹ ë¥´ì§€ë§Œ, ì „ì›ì´ êº¼ì§€ë©´ ë‚ ì•„ê°ˆ ìˆ˜ ìˆìŒ (ê·¸ëŸ¬ë‚˜ ì‹¤ì‹œê°„ ë°ì´í„° ê³µìœ ìš©ìœ¼ë¡œëŠ” ìµœê³ )

### âœ… 2. RedisëŠ” "ëŒ€ê¸°ì—´"ì´ë‹¤ â€” ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬ (Celery ë¸Œë¡œì»¤)
> ë¹„ìœ  : ê³ ê°ì´ "ëª¨ë¸ í•™ìŠµ ìš”ì²­"ì„ í–ˆì„ ë•Œ, ê·¸ê±¸ ë°”ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ëŒ€ê¸°ì—´ì— ë„£ì–´ë‘ë©´ ì‘ì—…ìê°€ í•˜ë‚˜ì”© êº¼ë‚´ì„œ ì²˜ë¦¬í•¨.

  - ê³ ê° ìš”ì²­: FastAPI /```train```
  - ëŒ€ê¸°ì—´ì— ë“±ë¡: Celeryê°€ Redisì— ìš”ì²­ ë©”ì‹œì§€ë¥¼ ë„£ìŒ
  - ì‘ì—…ì(worker): ëŒ€ê¸°ì—´ì—ì„œ êº¼ë‚´ì„œ ì²˜ë¦¬
  - ê²°ê³¼ ì €ì¥: Redisì— ì‘ì—… ìƒíƒœë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê²°ê³¼ë¥¼ ë°˜í™˜

```python
# ì‘ì—… ìš”ì²­ (ìš”ì²­ â†’ Redis)
task = train_model_task.delay(project_id)

# ê²°ê³¼ í™•ì¸ (Redisì—ì„œ)
task_result = task.get()
```

### âœ… 3. RedisëŠ” "ì‹¤ì‹œê°„ ê³µìœ  ìº˜ë¦°ë”"ë‹¤ â€” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ìƒíƒœ í™•ì¸

  - model_1ì˜ ìƒíƒœê°€ runningì¸ì§€ idleì¸ì§€ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ Redisë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥
  - ë™ì‹œì— ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ì ‘ì† ì¤‘ì¼ ë•Œ ìƒíƒœ ì¶©ëŒ ì—†ì´ ê´€ë¦¬ ê°€ëŠ¥

### ğŸ‘£ Redis ê°œë…ì„ ì‰½ê²Œ ìµíˆëŠ” ë°©ë²• 3ë‹¨ê³„
| ë‹¨ê³„ | ì„¤ëª… | ìë£Œ |
|------|------|------|
| ğŸ”¹ 1ë‹¨ê³„ | **CLIë¡œ Redis ì§ì ‘ ì¡°ì‘í•´ ë³´ê¸°** | [`redis-cli`](https://redis.io/docs/interact/redis-cli/) ì‹¤ìŠµ ì˜ˆì‹œ (ì˜¨ë¼ì¸ CLI ìˆìŒ) |
| ğŸ”¹ 2ë‹¨ê³„ | **Pythonì—ì„œ Redis ì‚¬ìš©í•´ ë³´ê¸°** |  |
| ğŸ”¹ 3ë‹¨ê³„ | **ë‚´ í”„ë¡œì íŠ¸ íë¦„ì— Redisê°€ ì–´ë””ì— ì“°ì´ëŠ”ì§€ ê·¸ë¦¼ìœ¼ë¡œ ê·¸ë ¤ë³´ê¸°** |  |

### ğŸ§ª ì‹¤ìŠµ ì˜ˆì‹œ
```python
# redis_test.py
import redis

r = redis.Redis(host='localhost', port=6379, db=0, decode_responses=True)

# ìƒíƒœ ì €ì¥
r.set('model1_status', 'running')

# ìƒíƒœ í™•ì¸
print("Model 1 Status:", r.get('model1_status'))

# ìƒíƒœ ì—…ë°ì´íŠ¸
r.set('model1_status', 'completed')

# ì‚­ì œ
r.delete('model1_status')
```
> ```python redis_test.py```ë¡œ ì‹¤í–‰í•´ë³´ê¸°

### âœï¸ Redis ì´ë¯¸ì§€
```less
[ FastAPI ] ---> [ Celery Task ìš”ì²­ ]
      |                  |
      â†“                  â†“
  ì‚¬ìš©ì ìš”ì²­       Redisê°€ ëŒ€ê¸°ì—´ë¡œ ê´€ë¦¬
                          â†“
                   [ Celery Worker ]
                          â†“
                   ì‘ì—… ì²˜ë¦¬ ì¤‘ ìƒíƒœë¥¼ Redisì— ì €ì¥
```
